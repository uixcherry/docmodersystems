# Документация по командам администрации сервера

---

## Команда `/ban` - Управление банами игроков

**Алиасы:** `/b`

### Подкоманды

#### `/ban add` - Забанить игрока
**Алиасы:** `a`, `create`

**Синтаксис:** `/ban add <player/steamid> <time> <reason>`

**Примеры:**
```
/ban add PlayerName 1d Читы
/ban add 76561198012345678 2h30m Токсичность
/ban add PlayerName perm Серьёзное нарушение
```

**Форматы времени:**
- `30s`, `5m`, `2h`, `3d`, `1w` - секунды, минуты, часы, дни, недели
- `perm` или `0` - перманентный бан
- Комбинированный формат: `1d2h30m` (1 день 2 часа 30 минут)

#### `/ban remove` - Разбанить игрока
**Алиасы:** `r`, `delete`, `unban`

**Синтаксис:** `/ban remove <steamid/banid>`

**Примеры:**
```
/ban remove 76561198012345678  # Снять все активные баны с игрока
/ban remove 123                # Снять конкретный бан по ID
```

#### `/ban list` - История банов игрока
**Алиасы:** `l`, `history`

**Синтаксис:** `/ban list <player/steamid>`

**Примеры:**
```
/ban list PlayerName
/ban list 76561198012345678
```

#### `/ban check` - Проверить статус бана
**Алиасы:** `c`, `info`

**Синтаксис:** `/ban check <player/steamid>`

**Примеры:**
```
/ban check PlayerName
/ban check 76561198012345678
```

---

## Команда `/mute` - Управление блокировкой чата

**Алиасы:** `/m`

### Подкоманды

#### `/mute add` - Заблокировать чат игроку
**Алиасы:** `a`, `create`

**Синтаксис:** `/mute add <player/steamid> <time> <reason>`

**Примеры:**
```
/mute add PlayerName 30m Спам в чате
/mute add 76561198012345678 2h Токсичность
/mute add PlayerName 1d Нарушение правил чата
```

**Особенности:**
- Муты не могут быть перманентными
- Блокируется как текстовый, так и голосовой чат
- Автоматическое уведомление игрока о времени окончания мута

#### `/mute remove` - Разблокировать чат
**Алиасы:** `r`, `delete`, `unmute`

**Синтаксис:** `/mute remove <muteid>`

**Примеры:**
```
/mute remove 123
```

#### `/mute list` - История мутов игрока
**Алиасы:** `l`, `history`

**Синтаксис:** `/mute list <player/steamid>`

#### `/mute check` - Проверить статус мута
**Алиасы:** `c`, `info`

**Синтаксис:** `/mute check <player/steamid>`

---

## Команда `/warn` - Управление предупреждениями

**Алиасы:** `/w`, `/warning`

### Подкоманды

#### `/warn add` - Выдать предупреждение
**Алиасы:** `a`, `create`, `give`

**Синтаксис:** `/warn add <player/steamid> <time> <reason>`

**Примеры:**
```
/warn add PlayerName 1d Нарушение правил
/warn add 76561198012345678 3d Повторное нарушение
/warn add PlayerName 1w Серьёзное нарушение
```

**Особенности:**
- Предупреждения не могут быть перманентными
- Показывается количество активных предупреждений игрока
- Автоматически истекают по времени

#### `/warn remove` - Снять предупреждение
**Алиасы:** `r`, `delete`, `clear`

**Синтаксис:** `/warn remove <warnid>`

#### `/warn list` - История предупреждений
**Алиасы:** `l`, `history`

**Синтаксис:** `/warn list <player/steamid>`

#### `/warn check` - Проверить активные предупреждения
**Алиасы:** `c`, `info`

**Синтаксис:** `/warn check <player/steamid>`

---

## Команда `/kick` - Исключение игроков

**Алиасы:** `/k`

### Подкоманды

#### `/kick add` - Исключить игрока
**Алиасы:** `a`, `player`

**Синтаксис:** `/kick add <player> <reason>`

**Примеры:**
```
/kick add PlayerName Спам в чате
/kick add 76561198012345678 Нарушение правил
```

**Особенности:**
- Работает только для онлайн игроков
- Немедленное отключение с указанием причины
- Поддержка обратной совместимости: `/kick <player> <reason>`

---

## Команда `/cheat` - Управление проверками на читы

**Алиасы:** `/c`, `/check`

### Подкоманды

#### `/cheat start` - Начать проверку
**Алиасы:** `s`, `begin`

**Синтаксис:** `/cheat start <player> [discord]`

**Примеры:**
```
/cheat start PlayerName
/cheat start PlayerName AdminName#1234
```

**Что происходит:**
- Игрок телепортируется к администратору
- Включается режим бога и невидимости
- Запускается таймер проверки
- Отображается UI с информацией о проверке

#### `/cheat end` - Завершить проверку
**Алиасы:** `e`, `stop`, `finish`

**Синтаксис:** `/cheat end <player>`

**Особенности:**
- Восстанавливает изначальное состояние игрока
- Только админ, начавший проверку, может её завершить

#### `/cheat pause` - Приостановить проверку
**Алиасы:** `p`, `hold`

**Синтаксис:** `/cheat pause <player>`

#### `/cheat resume` - Возобновить проверку
**Алиасы:** `r`, `continue`

**Синтаксис:** `/cheat resume <player>`

#### `/cheat discord` - Изменить Discord для связи
**Алиасы:** `d`, `contact`

**Синтаксис:** `/cheat discord <player> <discord>`

**Примеры:**
```
/cheat discord PlayerName AdminName#1234
```

#### `/cheat result` - Установить результат проверки
**Алиасы:** `res`, `verdict`

**Синтаксис:** `/cheat result <player> <pass/fail> [reason]`

**Примеры:**
```
/cheat result PlayerName pass
/cheat result PlayerName fail Использование читов
```

**Что происходит при fail:**
- Игрок получает перманентный бан
- Автоматическое уведомление в Discord
- Запись в логи

#### `/cheat status` - Статус проверки игрока
**Алиасы:** `st`, `info`

**Синтаксис:** `/cheat status <player>`

**Отображает:**
- Состояние проверки (активна/приостановлена)
- Оставшееся время
- Администратор, начавший проверку
- Discord для связи
- Время начала проверки

#### `/cheat list` - Список активных проверок
**Алиасы:** `l`, `all`

**Синтаксис:** `/cheat list`

**Показывает:**
- Все активные проверки на сервере
- Время до завершения каждой проверки
- Статус (активна/пауза)
- Администратор, проводящий проверку

---

## Команда `/check` - Проверка информации об игроках

**Алиасы:** `/checkplayer`, `/cp`, `/info`

### Подкоманды

#### `/check player` - Полная информация об игроке
**Алиасы:** `p`, `info`

**Синтаксис:** `/check player <player/steamid>`

**Примеры:**
```
/check player PlayerName
/check player 76561198012345678
```

**Отображает:**
- Имя и SteamID игрока
- Статус (онлайн/офлайн)
- Даты первого захода и последней активности
- Статистику наказаний (баны/муты/предупреждения)
- Активные наказания с деталями
- Количество уникальных IP и HWID

#### `/check recent` - Недавние игроки
**Алиасы:** `r`, `last`

**Синтаксис:** `/check recent [количество]`

**Примеры:**
```
/check recent       # Показать 10 последних игроков
/check recent 20    # Показать 20 последних игроков
```

#### `/check stats` - Статистика системы наказаний
**Алиасы:** `s`, `statistics`

**Синтаксис:** `/check stats`

**Отображает:**
- Количество активных банов, мутов и предупреждений
- Последние 5 наказаний с деталями
- Общую статистику системы

#### `/check alts` - Поиск альтернативных аккаунтов
**Алиасы:** `alt`, `suspicious`

**Синтаксис:** `/check alts <player/steamid>`

**Примеры:**
```
/check alts PlayerName
/check alts 76561198012345678
```

**Ищет подозрительные аккаунты по:**
- Общим IP-адресам
- Общим HWID
- Показывает статус найденных аккаунтов (забанены/замучены)

#### Обратная совместимость
**Синтаксис:** `/check <player>`

Автоматически выполняет `/check player <player>` для быстрой проверки.

---

## Общие возможности системы

### Поиск игроков
Все команды поддерживают поиск игроков по:
- **Имени игрока** - поиск по частичному совпадению
- **SteamID** - точный поиск по полному SteamID
- **Онлайн игрокам** - автоматический поиск среди подключенных игроков

### Обработка множественных результатов
Если найдено несколько игроков с похожим именем:
- Отображается список всех найденных игроков
- Показывается их статус (онлайн/офлайн)
- Рекомендуется использовать SteamID для точного выбора

### Форматы времени
Система поддерживает гибкое указание времени:
- **Секунды:** `30s`, `45sec`
- **Минуты:** `15m`, `30min`
- **Часы:** `2h`, `12hour`
- **Дни:** `1d`, `7day`
- **Недели:** `1w`, `2week`
- **Комбинированный:** `1d2h30m15s`
- **Перманентный:** `perm`, `permanent`, `0` (только для банов)

### Уведомления и логирование
- **Чат-уведомления** для всех администраторов
- **Персональные уведомления** для затронутых игроков
- **Discord-интеграция** для всех действий
- **Подробное логирование** всех административных действий

### Система кэширования
- Автоматическое кэширование данных игроков
- Оптимизированные запросы к базе данных
- Автоматическая очистка устаревших данных

### Защита от обхода банов
- Автоматическое обнаружение обхода банов по IP и HWID
- Настраиваемые действия (предупреждение/кик/бан)
- Детальное логирование попыток обхода

### Контроль чата
- Автоматическое обнаружение спама
- Фильтрация запрещенных ссылок
- Система предупреждений с автоматическими мутами
- Настраиваемые пороги и действия

---

## Примеры типичных сценариев использования

### Быстрая проверка игрока
```bash
/check PlayerName                    # Основная информация
/ban check PlayerName               # Статус банов
/mute check PlayerName              # Статус мутов
```

### Наказание за нарушения
```bash
/warn add PlayerName 1d Первое нарушение
/mute add PlayerName 30m Спам в чате
/ban add PlayerName 3d Серьёзное нарушение
```

### Проверка на читы
```bash
/cheat start PlayerName AdminName#1234    # Начать проверку
/cheat status PlayerName                  # Проверить статус
/cheat result PlayerName pass             # Игрок прошел проверку
# или
/cheat result PlayerName fail Читы обнаружены
```

### Поиск альтов
```bash
/check alts SuspiciousPlayer         # Найти связанные аккаунты
/ban add 76561198012345678 perm Альт забаненного игрока
```

### Снятие наказаний
```bash
/ban remove 123                     # Снять бан по ID
/mute remove 456                    # Снять мут по ID
/warn remove 789                    # Снять предупреждение по ID
```
